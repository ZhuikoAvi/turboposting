<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ - –¢—É—Ä–±–æ–ü–æ—Å—Ç–∏–Ω–≥</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
        }
        .login-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .password-toggle {
            cursor: pointer;
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #6c757d;
            font-size: 12px;
            padding: 5px 8px;
            border-radius: 3px;
        }
        .password-toggle:hover {
            background-color: #f8f9fa;
        }
        .password-wrapper {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="login-card p-5">
                    <div class="text-center mb-4">
                        <h2>üöÄ –í—Ö–æ–¥ –≤ –¢—É—Ä–±–æ–ü–æ—Å—Ç–∏–Ω–≥</h2>
                        <p class="text-muted">–í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
                    </div>

                    <form id="authForm">
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" placeholder="–≤–∞—à@email.com" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="password" class="form-label">–ü–∞—Ä–æ–ª—å</label>
                            <div class="password-wrapper">
                                <input type="password" class="form-control" id="password" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)" required style="padding-right: 80px;">
                                <button type="button" class="password-toggle" id="togglePassword">
                                    –ü–æ–∫–∞–∑–∞—Ç—å
                                </button>
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary btn-lg">–í–æ–π—Ç–∏ / –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                        </div>
                    </form>

                    <div class="text-center mt-3">
                        <a href="index.html" class="text-decoration-none">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
                    </div>

                    <div id="message" class="mt-3"></div>

                    <div class="mt-3 p-3 bg-light rounded">
                        <small>‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
        const toggleButton = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');
        
        toggleButton.addEventListener('click', function() {
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleButton.textContent = '–°–∫—Ä—ã—Ç—å';
            } else {
                passwordInput.type = 'password';
                toggleButton.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å';
            }
        });

        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –±–∞–ª–∞–Ω—Å–∞
        document.getElementById('authForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (!email || !password) {
                showMessage('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'danger');
                return;
            }

            // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º email (–ø—Ä–∏–≤–æ–¥–∏–º –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É)
            const normalizedEmail = email.toLowerCase().trim();
            const userKey = 'user_' + normalizedEmail;
            let user = localStorage.getItem(userKey);

            if (user) {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –¥–∞–Ω–Ω—ã–µ
                user = JSON.parse(user);
                showMessage('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ!', 'success');
            } else {
                // –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —Å–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å
                user = {
                    email: normalizedEmail,
                    wallet: 100, // –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–æ–Ω—É—Å
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                localStorage.setItem(userKey, JSON.stringify(user));
                showMessage('–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω! –ü–æ–ª—É—á–µ–Ω —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –±–æ–Ω—É—Å 100 —Ä—É–±.', 'success');
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞
            user.lastLogin = new Date().toISOString();
            localStorage.setItem(userKey, JSON.stringify(user));
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é
            localStorage.setItem('currentUser', JSON.stringify(user));
            
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 1500);
        });

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = `<div class="alert alert-${type}">${text}</div>`;
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –≤—Ö–æ–¥
        const currentUser = localStorage.getItem('currentUser');
        if (currentUser) {
            document.getElementById('email').value = JSON.parse(currentUser).email;
        }
    </script>
</body>
</html>